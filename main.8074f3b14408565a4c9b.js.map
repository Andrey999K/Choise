{"version":3,"file":"main.8074f3b14408565a4c9b.js","mappings":"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","sources":["webpack:///./index.ts"],"sourcesContent":["import \"./index.scss\";\r\nvar popupOpen = false;\r\nvar animationOn = false;\r\nvar popupBg = document.querySelector(\".popup-bg\");\r\nvar popup = document.querySelector(\".popup\");\r\nvar buttonNotNow = document.querySelector(\".popup__button-not-now\");\r\nvar popupDesktop = document.querySelector(\".popup-bg-desktop\");\r\nconsole.log(popupDesktop);\r\nvar onPopupOpen = function () {\r\n    animationOn = true;\r\n    if (window.innerWidth < 1280) {\r\n        popupBg.classList.remove(\"hidden\");\r\n        setTimeout(function () {\r\n            popupBg.classList.remove(\"hidden-popup\");\r\n            popup.classList.remove(\"hide\");\r\n        }, 1);\r\n        popupOpen = true;\r\n        setTimeout(function () { return animationOn = false; }, 1000);\r\n    }\r\n    else {\r\n        popupDesktop.classList.remove(\"hidden\");\r\n        setTimeout(function () {\r\n            popupDesktop.classList.add(\"show\");\r\n        }, 0);\r\n        setTimeout(function () { return animationOn = false; }, 500);\r\n    }\r\n};\r\npopupDesktop.addEventListener(\"click\", function (e) {\r\n    if (!event.target.closest(\".popup-desktop__wrapper\")) {\r\n        animationOn = true;\r\n        popupDesktop.classList.remove(\"show\");\r\n        setTimeout(function () {\r\n            popupDesktop.classList.add(\"hidden\");\r\n            popupOpen = false;\r\n            animationOn = false;\r\n        }, 500);\r\n    }\r\n});\r\nif (window.innerWidth < 1280) {\r\n    onPopupOpen();\r\n}\r\nwindow.addEventListener(\"click\", function (event) {\r\n    if (event.target !== buttonNotNow && !event.target.closest(\".swiper\")) {\r\n        if (!popupOpen && !animationOn) {\r\n            onPopupOpen();\r\n        }\r\n    }\r\n});\r\nbuttonNotNow.addEventListener(\"click\", function () {\r\n    if (!animationOn) {\r\n        animationOn = true;\r\n        popupBg.classList.add(\"hidden-popup\");\r\n        popup.classList.add(\"hide\");\r\n        setTimeout(function () {\r\n            popupOpen = false;\r\n            popupBg.classList.add(\"hidden\");\r\n            animationOn = false;\r\n        }, 1000);\r\n    }\r\n});\r\nvar findHighColumn = function (heightColumns) {\r\n    var high = heightColumns[0];\r\n    var numberColumn = 0;\r\n    for (var i = 1; i < heightColumns.length; i++) {\r\n        if (heightColumns[i] < high) {\r\n            high = heightColumns[i];\r\n            numberColumn = i;\r\n        }\r\n    }\r\n    return { high: high, numberColumn: numberColumn };\r\n};\r\nvar findLowColumn = function (heightColumns) {\r\n    var high = heightColumns[0];\r\n    for (var i = 1; i < heightColumns.length; i++) {\r\n        if (heightColumns[i] > high) {\r\n            high = heightColumns[i];\r\n        }\r\n    }\r\n    return high;\r\n};\r\nvar masonryInit = function (widthScreen) {\r\n    var _a;\r\n    var classGrid = \"grid\";\r\n    var gap = 8;\r\n    var columnWidth = (document.querySelector(\".\".concat(classGrid)).clientWidth - gap) / 2;\r\n    var columnNumber = 2;\r\n    var body = document.querySelector(\"body\");\r\n    if (widthScreen >= 1280) {\r\n        if (body.className !== \"product-page\" && body.className !== \"selection-page\" && body.className !== \"profile\") {\r\n            classGrid = \"grid-desktop\";\r\n        }\r\n        columnWidth = 236;\r\n        gap = 16;\r\n        columnNumber = 5;\r\n        if (widthScreen <= 1700) {\r\n            columnWidth = 177;\r\n            gap = 12;\r\n        }\r\n    }\r\n    var grid = document.querySelector(\".\".concat(classGrid));\r\n    var gridItems = Array.from(document.querySelectorAll(\".\".concat(classGrid, \" .grid-item__container\")));\r\n    grid.style.display = \"block\";\r\n    // Если всего 1 карточка\r\n    if ((gridItems === null || gridItems === void 0 ? void 0 : gridItems.length) === 1) {\r\n        gridItems[0].parentElement.style.position = \"absolute\";\r\n        gridItems[0].parentElement.style.top = \"0px\";\r\n        gridItems[0].parentElement.style.left = \"0px\";\r\n        grid.style.height = \"\".concat(gridItems[0].clientHeight, \"px\");\r\n        return;\r\n    }\r\n    var rowNumber = 0;\r\n    var heightColumns = [];\r\n    for (var i = 0; i < columnNumber; i++) {\r\n        heightColumns.push((_a = gridItems[i]) === null || _a === void 0 ? void 0 : _a.clientHeight);\r\n    }\r\n    if ((gridItems === null || gridItems === void 0 ? void 0 : gridItems.length) > 1) {\r\n        for (var i = 1; i < gridItems.length; i++) {\r\n            rowNumber = Math.floor(i / columnNumber);\r\n            gridItems[i].parentElement.style.position = \"absolute\";\r\n            if (rowNumber === 0) {\r\n                gridItems[i].parentElement.style.top = \"0px\";\r\n                gridItems[i].parentElement.style.left = \"\".concat((columnWidth + gap) * (i % columnNumber), \"px\");\r\n                console.log(\"\".concat((columnWidth + gap) * (i % columnNumber), \"px\"), columnWidth, gap, i, columnNumber);\r\n            }\r\n            else {\r\n                var _b = findHighColumn(heightColumns), high = _b.high, numberColumn = _b.numberColumn;\r\n                gridItems[i].parentElement.style.top = \"\".concat(high + gap, \"px\");\r\n                gridItems[i].parentElement.style.left = \"\".concat((columnWidth + gap) * numberColumn, \"px\");\r\n                console.log(gridItems[i], \"\".concat(high + gap, \"px\"), \"\".concat((columnWidth + gap) * numberColumn, \"px\"), columnWidth, gap, numberColumn);\r\n                heightColumns[numberColumn] += gap + gridItems[i].clientHeight;\r\n            }\r\n            if (i === gridItems.length - 1) {\r\n                grid.style.height = \"\".concat(findLowColumn(heightColumns), \"px\");\r\n                grid.style.overflow = \"visible\";\r\n            }\r\n        }\r\n    }\r\n};\r\n// ИНИЦИАЛИЗАЦИЯ ПЛАВАЮЩЕЙ СЕТКИ\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n    setTimeout(function () {\r\n        masonryInit(window.innerWidth);\r\n    }, 300);\r\n});\r\nwindow.addEventListener('resize', function () {\r\n    masonryInit(window.innerWidth);\r\n});\r\n"],"names":["popupOpen","animationOn","popupBg","document","querySelector","popup","buttonNotNow","popupDesktop","console","log","onPopupOpen","window","innerWidth","classList","remove","setTimeout","add","addEventListener","e","event","target","closest","findHighColumn","heightColumns","high","numberColumn","i","length","findLowColumn","masonryInit","widthScreen","_a","classGrid","gap","columnWidth","concat","clientWidth","columnNumber","body","className","grid","gridItems","Array","from","querySelectorAll","style","display","parentElement","position","top","left","height","clientHeight","rowNumber","push","Math","floor","_b","overflow"],"sourceRoot":""}